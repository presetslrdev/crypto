<template>
  <header class="header" :class="{ scrolled: isScrolled, open: isOpen }">
    <div class="header__wrapper container">
      <div class="header__left">
        <div class="header__logo">
          <nuxt-link to="/">
            <svg
              width="180"
              height="54"
              fill="none"
              xmlns="http://www.w3.org/2000/svg"
            >
              <path
                d="M53.905 23.355a5.449 5.449 0 00-.474-1.227 3.275 3.275 0 00-1.893-1.592c-.416-.158-.903-.237-1.463-.237-.817 0-1.527.165-2.13.495a4.148 4.148 0 00-1.441 1.334 6.015 6.015 0 00-.84 1.872 9.012 9.012 0 00-.257 2.151c0 .732.086 1.45.258 2.152.186.703.466 1.334.839 1.893.373.545.853.983 1.441 1.313.603.33 1.313.494 2.13.494.603 0 1.133-.1 1.592-.3a3.753 3.753 0 001.184-.861c.33-.373.588-.804.774-1.291a6.133 6.133 0 00.366-1.57h2.625a7.13 7.13 0 01-.603 2.516c-.33.76-.781 1.42-1.355 1.98a6.126 6.126 0 01-2.023 1.27c-.774.3-1.627.45-2.56.45-1.147 0-2.18-.207-3.098-.623a6.942 6.942 0 01-2.302-1.743 7.9 7.9 0 01-1.463-2.56 9.672 9.672 0 01-.495-3.12c0-1.09.165-2.122.495-3.098a7.9 7.9 0 011.463-2.56 6.943 6.943 0 012.302-1.743c.918-.43 1.95-.645 3.098-.645.86 0 1.671.122 2.431.366.76.23 1.428.573 2.001 1.032.588.445 1.062.99 1.42 1.636.359.645.581 1.384.667 2.216h-2.69z"
                fill="#43465D"
              />
              <path
                d="M58.717 22.71h2.302v2.15h.043c.072-.3.208-.595.41-.881.214-.287.465-.546.752-.775a3.82 3.82 0 01.99-.581 2.93 2.93 0 011.097-.215c.287 0 .48.007.58.021.116.015.23.03.345.043v2.367a6.113 6.113 0 00-.538-.064 3.135 3.135 0 00-.516-.043c-.416 0-.81.085-1.183.258a2.56 2.56 0 00-.947.731c-.273.316-.488.71-.645 1.183-.158.474-.237 1.019-.237 1.636v5.292h-2.453V22.71z"
                fill="#43465D"
              />
              <path
                d="M65.055 22.71h2.689l2.904 8.304h.043l2.819-8.305h2.56l-4.324 11.726c-.201.502-.402.982-.603 1.441-.186.459-.423.86-.71 1.205a2.811 2.811 0 01-1.033.839c-.415.215-.946.323-1.592.323-.573 0-1.14-.043-1.7-.13v-2.065c.202.029.395.057.582.086.186.043.38.065.58.065.288 0 .524-.036.71-.108.187-.072.338-.18.452-.323.13-.129.237-.286.323-.473a4.73 4.73 0 00.237-.645l.28-.86-4.217-11.08z"
                fill="#43465D"
              />
              <path
                d="M77.502 22.71h2.324v1.505h.043c.344-.645.824-1.104 1.441-1.377a4.685 4.685 0 012-.43c.876 0 1.636.158 2.281.473.66.301 1.205.724 1.636 1.27.43.53.752 1.154.968 1.871.215.718.322 1.485.322 2.302 0 .746-.1 1.47-.3 2.173a5.497 5.497 0 01-.883 1.872c-.387.53-.882.961-1.484 1.291-.603.316-1.313.473-2.13.473-.359 0-.718-.036-1.076-.107a4.272 4.272 0 01-1.033-.302 4.581 4.581 0 01-.925-.537 3.32 3.32 0 01-.688-.796h-.043v5.55h-2.453V22.71zm8.563 5.571c0-.502-.065-.99-.194-1.463a3.846 3.846 0 00-.58-1.248 2.848 2.848 0 00-.969-.882 2.566 2.566 0 00-1.334-.344c-1.032 0-1.814.359-2.345 1.076-.516.717-.774 1.67-.774 2.861 0 .56.064 1.083.193 1.57.144.474.352.883.624 1.227.273.345.595.617.968.818.388.2.832.301 1.334.301.56 0 1.033-.115 1.42-.344a2.94 2.94 0 00.947-.882c.258-.373.437-.79.538-1.248.114-.473.172-.954.172-1.442z"
                fill="#43465D"
              />
              <path
                d="M89.471 22.71h1.85v-3.336h2.453v3.335h2.216v1.829h-2.216v5.938c0 .258.007.48.022.667.028.186.078.344.15.473.086.13.208.23.366.301.158.058.373.086.645.086h.517c.172-.014.344-.043.516-.086v1.894c-.272.028-.538.057-.796.086a7.227 7.227 0 01-.796.043c-.645 0-1.169-.058-1.57-.172-.388-.13-.696-.309-.926-.538a2.07 2.07 0 01-.452-.904 7.488 7.488 0 01-.129-1.226v-6.562h-1.85v-1.829z"
                fill="#43465D"
              />
              <path
                d="M102.853 34.133c-.889 0-1.685-.143-2.388-.43a5.337 5.337 0 01-1.764-1.226 5.415 5.415 0 01-1.097-1.85c-.244-.718-.366-1.507-.366-2.367 0-.846.122-1.628.366-2.345a5.416 5.416 0 011.097-1.85 5.083 5.083 0 011.764-1.205c.703-.302 1.499-.452 2.388-.452.89 0 1.678.15 2.367.452a4.824 4.824 0 011.764 1.204 4.983 4.983 0 011.097 1.85c.259.718.388 1.5.388 2.346 0 .86-.129 1.65-.388 2.366a4.982 4.982 0 01-1.097 1.85 5.05 5.05 0 01-1.764 1.227c-.689.287-1.477.43-2.367.43zm0-1.936c.545 0 1.019-.115 1.42-.344.402-.23.732-.53.99-.904.258-.373.445-.789.559-1.248a5.38 5.38 0 000-2.861 3.527 3.527 0 00-.559-1.248 2.988 2.988 0 00-.99-.904c-.401-.23-.875-.344-1.42-.344-.545 0-1.018.115-1.42.344-.401.23-.731.531-.989.904a3.85 3.85 0 00-.581 1.248 6.01 6.01 0 000 2.861c.129.46.323.875.581 1.248.258.373.588.674.989.904.402.23.875.344 1.42.344z"
                fill="#43465D"
              />
              <path
                d="M121.222 23.355a5.496 5.496 0 00-.473-1.227 3.274 3.274 0 00-1.894-1.592c-.416-.158-.903-.237-1.463-.237-.817 0-1.527.165-2.13.495a4.146 4.146 0 00-1.441 1.334 6.004 6.004 0 00-.839 1.872 9.017 9.017 0 00-.258 2.151c0 .732.086 1.45.258 2.152.186.703.466 1.334.839 1.893.373.545.853.983 1.441 1.313.603.33 1.313.494 2.13.494.603 0 1.133-.1 1.592-.3a3.758 3.758 0 001.184-.861 4.17 4.17 0 00.774-1.291 6.091 6.091 0 00.366-1.57h2.625c-.058.917-.258 1.756-.603 2.516-.33.76-.781 1.42-1.355 1.98a6.131 6.131 0 01-2.022 1.27c-.775.3-1.628.45-2.561.45-1.147 0-2.18-.207-3.098-.623a6.946 6.946 0 01-2.302-1.743 7.897 7.897 0 01-1.463-2.56 9.67 9.67 0 01-.495-3.12c0-1.09.165-2.122.495-3.098a7.897 7.897 0 011.463-2.56 6.948 6.948 0 012.302-1.743c.918-.43 1.951-.645 3.098-.645a7.91 7.91 0 012.431.366c.761.23 1.428.573 2.001 1.032.588.445 1.062.99 1.42 1.636.359.645.581 1.384.667 2.216h-2.689z"
                fill="#43465D"
              />
              <path
                d="M131.133 34.133c-.889 0-1.685-.143-2.388-.43a5.343 5.343 0 01-1.764-1.226 5.418 5.418 0 01-1.097-1.85c-.244-.718-.366-1.507-.366-2.367 0-.846.122-1.628.366-2.345a5.419 5.419 0 011.097-1.85 5.089 5.089 0 011.764-1.205c.703-.302 1.499-.452 2.388-.452.889 0 1.678.15 2.367.452a4.824 4.824 0 011.764 1.204 4.996 4.996 0 011.097 1.85 6.88 6.88 0 01.387 2.346c0 .86-.129 1.65-.387 2.366a4.995 4.995 0 01-1.097 1.85 5.05 5.05 0 01-1.764 1.227c-.689.287-1.478.43-2.367.43zm0-1.936c.545 0 1.019-.115 1.42-.344.402-.23.732-.53.99-.904.258-.373.444-.789.559-1.248a5.38 5.38 0 000-2.861 3.544 3.544 0 00-.559-1.248 2.988 2.988 0 00-.99-.904c-.401-.23-.875-.344-1.42-.344-.545 0-1.018.115-1.42.344-.401.23-.731.531-.989.904a3.827 3.827 0 00-.581 1.248 5.994 5.994 0 000 2.861c.129.46.322.875.581 1.248.258.373.588.674.989.904.402.23.875.344 1.42.344z"
                fill="#43465D"
              />
              <path
                d="M148.555 33.832h-2.41v-1.549h-.043c-.301.56-.753 1.011-1.355 1.355-.588.33-1.19.495-1.807.495-1.463 0-2.525-.358-3.184-1.075-.646-.732-.968-1.83-.968-3.292v-7.057h2.452v6.82c0 .976.187 1.664.56 2.066.372.401.896.602 1.57.602.516 0 .947-.079 1.291-.237a2.34 2.34 0 00.839-.624c.215-.272.366-.595.452-.968.1-.373.15-.774.15-1.204v-6.455h2.453v11.123z"
                fill="#43465D"
              />
              <path
                d="M151.142 22.71h2.302v2.15h.043c.071-.3.208-.595.408-.881a4.33 4.33 0 01.753-.775c.302-.244.632-.438.99-.581a2.931 2.931 0 011.097-.215 5.01 5.01 0 01.925.064v2.367a6.108 6.108 0 00-.537-.064 3.142 3.142 0 00-.517-.043c-.416 0-.81.085-1.183.258a2.563 2.563 0 00-.947.731c-.272.316-.487.71-.645 1.183-.158.474-.237 1.019-.237 1.636v5.292h-2.452V22.71z"
                fill="#43465D"
              />
              <path
                d="M160.556 30.26c.071.718.344 1.22.817 1.507.473.287 1.04.43 1.7.43.229 0 .487-.014.774-.043.301-.043.581-.115.839-.215.259-.1.466-.244.624-.43.172-.201.251-.46.237-.775a1.082 1.082 0 00-.344-.775 2.255 2.255 0 00-.839-.473 6.79 6.79 0 00-1.141-.323c-.43-.086-.867-.179-1.312-.28-.459-.1-.904-.221-1.334-.365a4.487 4.487 0 01-1.14-.58 2.762 2.762 0 01-.796-.926c-.201-.387-.301-.86-.301-1.42 0-.602.143-1.104.43-1.506a3.358 3.358 0 011.119-.99 4.834 4.834 0 011.506-.538 9.02 9.02 0 011.592-.15c.573 0 1.118.064 1.635.194.53.114 1.004.308 1.42.58.43.273.781.632 1.054 1.076.287.43.466.954.538 1.57h-2.56c-.115-.587-.388-.982-.818-1.183-.416-.2-.896-.3-1.441-.3-.173 0-.381.014-.624.042-.23.029-.452.086-.667.172a1.266 1.266 0 00-.517.345c-.143.143-.215.337-.215.58 0 .302.101.545.301.732.216.186.488.344.818.473.344.115.731.215 1.162.302.43.085.875.179 1.334.28.444.1.882.221 1.312.365.43.143.81.337 1.14.58.345.245.617.553.818.926.215.373.323.832.323 1.377 0 .66-.151 1.219-.452 1.678a3.536 3.536 0 01-1.184 1.119 5.195 5.195 0 01-1.592.624 8.108 8.108 0 01-1.742.193 7.711 7.711 0 01-1.958-.236 4.794 4.794 0 01-1.549-.71 3.791 3.791 0 01-1.033-1.205c-.244-.488-.373-1.061-.387-1.721h2.453z"
                fill="#43465D"
              />
              <path
                d="M177.499 27.292a3.7 3.7 0 00-.258-1.12 2.618 2.618 0 00-.559-.924 2.43 2.43 0 00-.861-.646 2.382 2.382 0 00-1.118-.258c-.431 0-.825.08-1.184.237a2.618 2.618 0 00-.903.624 3.226 3.226 0 00-.603.925 3.423 3.423 0 00-.236 1.162h5.722zm-5.722 1.613c0 .43.057.846.172 1.248.129.402.315.753.559 1.054.244.302.552.545.925.732.373.172.818.258 1.334.258.717 0 1.291-.15 1.721-.452.445-.315.775-.782.99-1.398h2.323a4.633 4.633 0 01-.666 1.613 4.81 4.81 0 01-1.141 1.205 4.842 4.842 0 01-1.506.71 5.68 5.68 0 01-1.721.258c-.875 0-1.649-.143-2.324-.43a4.915 4.915 0 01-1.721-1.205 5.331 5.331 0 01-1.054-1.85 7.748 7.748 0 01-.344-2.367c0-.788.122-1.534.366-2.237a5.86 5.86 0 011.075-1.872 5.2 5.2 0 011.7-1.29c.66-.316 1.406-.474 2.238-.474.874 0 1.656.186 2.345.56a5.034 5.034 0 011.742 1.44 5.74 5.74 0 01.99 2.088 6.17 6.17 0 01.172 2.41h-8.175z"
                fill="#43465D"
              />
              <g clip-path="url(#clip0)">
                <path
                  d="M29.437 47.593c-.643-.482-.643-7.575-18.505-3.925C5.287 45.114 1 46.354 0 46.904 1.643 45.322 18.22 31.48 4.43 6c0 0 5.073 3.443 10.717 9.296 1.144 3.72 1.572 7.713.93 11.57-.501 2.96-1.644 5.784-3.288 8.332-2 3.099-2 3.787-4.644 6.335-.071.07-.071.07-.143.138 4.002-2.135 5.43-2.066 9.932-3.03.357-.069.643-.138 1-.207a30.065 30.065 0 015.002-.62c.857 0 1.714 0 2.572.07.214 0 1.929.068 2 .344a33.174 33.174 0 01.93 9.365z"
                  fill="#F10505"
                />
                <path
                  d="M31.652 38.848c0-.345-1.143-.896-1.429-1.033-.714-.345-1.429-.62-2.215-.758-1.786-.344-3.572-.413-5.358-.275-2.215.137-4.43.55-6.502 1.102-.93.275-1.858.481-2.787.757-.357.138-.714.207-1.143.344-.214.07-.786.138-.929.276 2.144-2.41 3.716-5.096 4.716-7.988 1.429-4.201 1.715-8.608.714-13.29-.5-2.48-1.357-4.959-2.5-7.576 2.715 2.135 7.144 6.198 10.931 11.5.5 3.994-.928 7.988-4 10.743-.43.344-.787.757-1.215 1.102-.215.206-.5.55-.786.757 1.071-.55 2.143-1.17 3.286-1.584 2.43-.826 5.073-1.515 7.574-1.515.929 2.41 1.5 4.89 1.643 7.438z"
                  fill="#F24405"
                />
                <path
                  d="M33.724 31.755c-.428-.413-1.071-.827-2.215-1.033-.214-.069-.5-.069-.786-.069h-.785c-1 0-2.287.138-3.859.482-.143.069-.357.069-.5.138-1.215.344-2.072.55-2.715.757.714-.826 1.286-1.721 1.786-2.617.286-.55.5-1.101.715-1.652.5-1.446.714-2.961.714-4.545 0-.482-.071-1.033-.143-1.515a12.3 12.3 0 00-.285-1.584c-.286-1.17-.715-2.341-1.215-3.512 2.715 2.135 8.86 7.782 9.288 15.15z"
                  fill="#F27405"
                />
              </g>
              <defs>
                <clipPath id="clip0">
                  <path
                    fill="#fff"
                    transform="translate(0 6)"
                    d="M0 0h33.724v41.593H0z"
                  />
                </clipPath>
              </defs>
            </svg>
          </nuxt-link>
        </div>
        <nav class="header__nav" :class="{ open: isOpen }">
          <ul>
            <li>
              <nuxt-link to="#" v-scroll-to="{ el: '#about', offset: -120 }">{{
                $t("header.about-service")
              }}</nuxt-link>
            </li>
            <li>
              <nuxt-link to="#" v-scroll-to="'#benefits'">{{
                $t("header.benefits")
              }}</nuxt-link>
            </li>
            <li>
              <nuxt-link to="#" v-scroll-to="'#faq'">FAQ</nuxt-link>
            </li>
            <li>
              <nuxt-link to="#" v-scroll-to="'#contacts'">{{
                $t("header.contacts")
              }}</nuxt-link>
            </li>
          </ul>
        </nav>
      </div>
      <div class="header__right">
        <div class="header__langs">
          <div class="lang" v-for="item in $i18n.locales" :key="item.id">
            <nuxt-link
              :to="switchLocalePath(item.code)"
              active-class="active"
              exact
            >
              {{ item.code }}
            </nuxt-link>
          </div>
        </div>
        <div class="header__btn">
          <btn :type="'default'">{{ $t("btn.text") }}</btn>
        </div>
        <div
          class="header__burger"
          :class="{ open: isOpen }"
          @click="isOpen = !isOpen"
        >
          <span></span><span></span><span></span>
        </div>
      </div>
    </div>
  </header>
</template>

<script lang="ts">
import Vue from "vue";

export default Vue.extend({
  data() {
    return {
      isScrolled: false,
      isOpen: false,
    };
  },
  methods: {
    checkScroll() {
      const top = window.scrollY;
      this.isOpen = false;
      if (top > 200) {
        this.isScrolled = true;
      } else {
        this.isScrolled = false;
      }
    },
  },
  mounted() {
    this.$nextTick(() => {
      window.addEventListener("scroll", this.checkScroll);
      this.checkScroll();
    });
  },
  beforeDestroy() {
    window.removeEventListener("scroll", this.checkScroll);
  },
});
</script>

<style scoped lang="scss">
.header {
  height: 75px;
  position: fixed;
  width: 100%;
  left: 0;
  top: 0;
  z-index: 999;
  transition: 0.3s;
  &__burger {
    position: relative;
    width: 30px;
    height: 20px;
    margin-left: 50px;
    display: none;
    @include media(tablet) {
      display: block;
    }
    span {
      display: block;
      width: 30px;
      height: 1px;
      background: #323232;
      position: absolute;
      left: 0;
      transition: 0.3s;
      &:nth-child(1) {
        top: 0;
      }
      &:nth-child(2) {
        top: 50%;
      }
      &:nth-child(3) {
        top: 100%;
      }
    }
    &.open {
      span {
        &:nth-child(1) {
          transform: rotate(45deg);
          top: 50%;
        }
        &:nth-child(2) {
          opacity: 0;
        }
        &:nth-child(3) {
          transform: rotate(-45deg);
          top: 50%;
        }
      }
    }
  }
  &:after {
    content: "";
    position: fixed;
    left: 0;
    top: 0;
    width: 100%;
    height: 60px;
    background: rgba(#e31e24, 0.2);
    -webkit-backdrop-filter: blur(20px);
    backdrop-filter: blur(20px);
    opacity: 0;
    transition: 0.3s;
  }
  &.open {
    &:after {
      opacity: 1;
      height: 100vh;
    }
  }
  &__logo {
    svg {
      transition: 0.3s;
    }
  }
  &.scrolled {
    height: 60px;
    &:after {
      opacity: 1;
    }
    .header__logo {
      svg {
        width: 34px;
      }
    }
  }
  &__left {
    display: flex;
    align-items: center;
  }
  &__wrapper {
    display: flex;
    align-items: center;
    justify-content: space-between;
    height: 100%;
    position: relative;
    z-index: 1000;
  }
  &__right {
    display: flex;
    align-items: center;
  }
  &__langs {
    display: flex;
    align-items: center;
    margin-right: 40px;
    .lang {
      &:first-child {
        margin-right: 20px;
      }
    }
    a {
      text-decoration: none;
      font-family: $roboto;
      font-size: 16px;
      line-height: 24px;
      color: #43465d;
      transition: 0.3s;
      opacity: 0.6;
      &.active,
      &:hover {
        opacity: 1;
      }
    }
  }
  &__nav {
    margin-left: 50px;
    transition: 0.3s;
    ul {
      list-style-type: none;
      margin: 0 0;
      padding: 0 0;
      display: flex;
      align-items: center;
      li {
        &:not(:last-child) {
          margin-right: 30px;
        }
      }
      a {
        text-decoration: none;
        font-family: $roboto;
        font-weight: 400;
        font-size: 16px;
        line-height: 24px;
        color: #43465d;
        transition: 0.3s;
        position: relative;
        &:before {
          content: "";
          width: 0%;
          height: 1px;
          display: block;
          position: absolute;
          background: #43465d;
          right: 0;
          bottom: 0;
          transition: 0.3s;
        }
        &:hover {
          &:before {
            width: 100%;
            animation: link-animation 3s;
          }
        }
      }
    }
  }
  @include media(tablet) {
    &__nav {
      position: fixed;
      margin-left: 0;
      left: 0;
      width: 100%;
      top: 75px;
      opacity: 0;
      visibility: hidden;
      &.open {
        opacity: 1;
        visibility: visible;
      }
      ul {
        flex-direction: column;
        height: calc(100vh - 75px);
        justify-content: center;
        li {
          margin-bottom: 50px;
          &:not(:last-child) {
            margin-right: 0;
          }
          a {
            font-size: 36px;
          }
        }
      }
    }
    &.scrolled {
      .header__nav {
        top: 60px;
        ul {
          height: calc(100vh - 60px);
        }
      }
    }
  }
  @include media(mobile-xxl) {
    &__btn {
      display: none;
    }
    &__langs {
      margin-right: 0px;
    }
    &__logo {
      svg {
        width: 34px;
      }
    }
  }
}
</style>
